Veja abaixo como solucionar alguns erros que podem ocorrer durante a operação da Suíte Saber e/ou do ABCD.

== Importação de arquivos ==

Ao tentar realizar o upload de um arquivo, é possível que a seguinte mensagem seja exibida:

|| Warning: Invalid argument supplied for foreach() in C:\abcd\www\htdocs\central\dataentry\upload.php on line 16 ||

== Soluções ==

 # Aumentar o Timeout;
 # Aumentar o tamanho permitido para o envio de arquivos.

Para aumentar o tamanho máximo permitido para o envio de arquivos, acesse o *php.ini* do servidor, conforme é mostrado abaixo.

{{{
; Whether to allow HTTP file uploads.
file_uploads = On

; Temporary directory for HTTP uploaded files (will use system default if not
; specified).
;upload_tmp_dir =

; Maximum allowed size for uploaded files.
upload_max_filesize = 2M
}}}

O servidor, por padrão, é configurado para carregar arquivos inferiores ou iguais a 2MB. Portanto, para carregar um arquivo maior, altere este valor.

----

= Empréstimo =

== Índice do empréstimo (ABCD)==

Ao clicar em uma das letras do índice utilizado para realizar a busca pelo número de registro do item e número do usuário, a janela de empréstimo (*prestar.php*) é fechada.

== Solução ==

Acesse o seguinte arquivo:

|| ...\central\circulation\capturaclaves.php ||

Logo após, busque pela linha e delete o comando *;self.close()*.

{{{
<td  bgcolor=#cccccc align=center><font size=1 face="arial"><? for ($i=65;$i<91;$i++ ) echo "<a href=javascript:AbrirIndice('".chr($i)."');self.close()>".chr($i)."</a>  "?></td>
}}}

----

== Transações ==

No Módulo de Empréstimo, na opção Transações, que se encontra na aba Base de Dados, a seta do botão *« Last* está errada.

== Solução ==

Busque as linhas 365 [v. 1.0.3] ou 393 [v. 1.0.5] do arquivo:

|| ...\central\dataentry\browse.php alterar: ||

Logo após, substitua a seta em:

{{{
« <?php echo $msgstr["last"]?>
}}}

por:

{{{
» <?php echo $msgstr["last"]?>
}}}

Caso não seja possível visualizar a seta, mas sim sua linguagem CSS, substitua:

{{{
&#171; <?php echo $msgstr["last"]?>
}}}

por:

{{{
&#187; <?php echo $msgstr["last"]?>
}}}

----

== Erro ao informar números de registros (ABCD) ==

Ao colocar um número de usuário inexistente, é possível que seja exibida uma mensagem contendo esta informação (borrower statement - estado_de_cuenta.php).

Também ao colocar um número de registro de item que não está emprestado, uma tela em branco com a mensagem "unautorized user" surgirá.

== Solução ==

Busque as linhas 160-166 do arquivo:

|| ...\central\circulation\loan_return_reserve.php ||

substitua o trecho *El número de inventario no está prestado* por *".$msgstr["inventory"]." ".$msgstr["noloan"]."*, conforme é mostrado abaixo:

{{{
 if (isset($arrHttp["error"]) and $arrHttp["inventory"]!=""){
       echo "
       <script>
       alert('".$arrHttp["inventory"].": El número de inventario no está prestado')
       </script>
       ";
}
}}}

para:

{{{
if (isset($arrHttp["error"]) and $arrHttp["inventory"]!=""){
        echo "
        <script>
        alert('".$arrHttp["inventory"].": ".$msgstr["inventory"]." ".$msgstr["noloan"]."')
        </script>
        ";
}
}}}

----

== Link para histórico do usuário (ABCD) ==

Dentro de cada submenu integrante da aba de Transações, é possível visualizar os links para alternar entre cada função de transação. Estes links não, porém, não estão disponíveis no submenu de Histórico do Leitor.

== Solução ==

No arquivo .../central/circulation/borrower_history.php, busque as tags abaixo:

{{{
<div class="actions"></div>
}}}

e, entre elas, acrescente o seguinte código:

{{{
<?php include("submenu_prestamo.php");?>
}}}

----

= OPAC =

== Formatação da referência (conforme ABNT) ==

Para realizar a formatação de referências conforme a ABNT, altere ou crie, caso não exista, o arquivo ...\www\bases\[base]\pfts\[lang]\cite.pft e copie para o arquivo o código abaixo:

{{{
'Referência conforme ABNT NBR 6023:2002.'
'<br /><br />'
mdl,v100^a,v110^a,v111^a,v130^a,
if p(v222^b) then
	mhl,v222^a," : "v222^b,
else
	mdl,v222^a,
fi,
if p(v245^b) then
	mhl,'<strong>'v245^a'</strong>',if p(v245^h) then mhl else mdl fi," : "v245^b,
else
	if p(v245^h) then mhl else mdl fi,'<strong>'v245^a'</strong>',
fi,
" ["v245^h"]. ",
mdl,v250^a, 
mhl,v260^a" : ",v260^b", ",mdl, v260^c,
v300^a,
mhl,if p(v440) then '(',(v440^a,|, n.|v440^n,|, |v440^v, if occ < nocc(v440) then '; ' fi,) ')'/ fi,
/#,
}}}

----